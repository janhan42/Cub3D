2024-06-02 20:29
상파일럿


## 진행 상황

- 문 그리기 도전

- 어... 일단 문 만들긴했음 아직은 한색깔로만 그리는데
	왼쪽에 빈틈의 실이 생김
	-> 왜그런지 모르겠음 한 두시간 삽질해봤는데도 안고쳐짐

- 텍스쳐 입히는것까지는 끝냄 근데 개느림
	반복연산 하지 말라고 변수에 결과 담아두고 해서 좀 빨라졌는데도 여전히 느림
	변수 22개 ㅋㅋㅋㅋ
	-> 마침 문 0번이 절반은 투명한거라 그걸로 테스트했음

-	`get_door_width`함수에서
	if 조건문에는 `atan`함수를 썼고
	else 조건문에는`atan2`함수를 썼는데
	통일이 이상하게 안됨
	atan으로 통일하면 H_DOOR가 고장나고
	atan2로 통일하면 V_DOOR가 고장남


## 해야하는거

- [X] `draw_obj` 함수 스케일 이전으로 돌리기
- [ ] `draw_obj` 함수 크기 작은 오브젝트 크게 만들기
- [X] 가로 문 파싱하기 -> 세로문은 'V' 가로문은 'H'
- [X] 문에 텍스쳐 입히기
- [ ] 문 여는거 구현
- [ ] 함수들 노미넷 맞추기.............
- [ ] 문 충돌 판정 추가하기




--------------------------------------------------------------------

2024-05-30 18:42
디버거 상신

## 진행 상황

릭 나는 부분 수정 완료
힙 버퍼 오버플로 나는 케이스도 수정 완료

## 제출 전 체크 사항
-Wall -Wextra -Werror -fsanitize=address로 테스트
norm 체크
while true; do leaks ./cub3d; sleep 1; done; 작동중 릭 체크

## 맵 파싱체크
플레이어 포시션이 중복으로 들어가있는지.
xpm경로가 중복으로 들어가는지(mand한정?)
맵이 벽으로 잘 둘러싸여있는지
0이 벽으로 둘러싸여있는지



## 수정사항

### heap buffer overflow 수정

- `object render`함수에서 배열 범위를 벗어나는 접근이 있었음
- while 조건문 안에 좌표가 1920을 넘어가면 종료되도록 추가했고
	반복문 안에 if 문에 render_x 가 0보다 작으면 continue할수있게 함
- render_x > 0 조건이 while 조건으로 들어가면 오브젝트가 왼쪽 화면에 걸쳤을 때 안그려서
	이렇게 했음 일단

### 이미지 불러오는 함수 수정

- load_texture_bonus.c 에서 make image 먼저 하는데
	`mlx_xpm_file_to_img` 함수에가 이미지도 만들어서 리턴해서 이렇게 안써도 괜찮을듯
- 대신 동적 할당을 해줘야함
- 그냥 해당 함수를 하나 만드는게 편할듯
-> `make_xpm_img` 함수랑 `make_png_img_nomalloc` 함수 만들어서 바꿔놓음
-> 확인하고 괜찮으면 주석 지워도 될듯


### 이전에 사용하던 background 이미지

- 이제 render 이미지에 합쳐서 다 그리기 때문에 필요없을 것 같음
- `init_game` 함수에서 백그라운드 이미지 만드는 부분 주석처리
- game 구조체에서 백그라운드 포인터 주석 처리
- `print info` 함수에서 백그라운드 주소 출력하는 부분 주석 처리


### update 함수에서 render 이미지 파괴 후 다시 생성 문제

- 백그라운드 이미지랑 렌더 이미지를 따로 둘 때 이렇게 사용했는데
	지금은 render 이미지 하나만 사용해서 굳이 파괴할 필요 없음
- 주석 처리 해놓음


### update 함수에서 게임모드일 때 미니맵 이미지 destroy

- 우리 미니맵 그리는 함수에서 매번 새로 이미지 만드는데
	삭제하는 부분이 없어서 여기 추가하면 될듯
- 추가 했는데 이 부분이 있으면 게임이 아주 조금 느려지는 것 같음


### draw_obj 관련

- 첫번째 todo 오브젝트랑 멀어졌을 때 각도 전환 -> 이부분 재현이 안됨
- 두번째 todo 오브젝트끼리 사이즈 차이가 너무 나는데
	png 파일 자체 크기를 조정하는거 어떨까
- janhan: 6월 3일에 통합 시키겠음

- 지금 step_x 랑 step_y가
	텍스쳐 원래 폭 / 지금 가지는 폭
	이렇게 되어있어서 만약에 이미지 크기 조정을 프로그램 안에서 하려면
	게임 시작하기 전에 이미지 하나를 기준으로 다른 이미지들을 리사이징 해야할 것 같음
- janhan: 6월 3일에 통합 시키겠음
